Feature:
  Trasnformation of Undervisningsaktiviteter (UA: Teaching Activities )
  UA records are transformed to Leganto Records in form of comma separated fields.
  FS: Felles Studentsystem

  Scenario: A collection of Teaching activity entries is retrieved from FS  # GET /undervisningsaktiviteter
    Given an accessible FS-API
    And an institution username and password for the FS-API
    And a year
    And one of the following semester codes:
      | VÅR  |
      | HØST |
    When a collection of Teaching activities is requested
    Then a list of all the Teaching activity ids for the specified semester, year and institution is generated


  Scenario: Retrieval of Teaching activity entry # GET /undervisningsaktivitet/{id}
    Given an accessible FS-API
    And an institution username and password for the FS-API
    And a Teaching activity id
    When a single Teaching activity entry is requested
    Then a single Teaching activity entry with the specified id is retrieved

  Scenario: Obligatory information of a UA entry
    Given a response for a request for Teaching Activity entry
    When
    And the entry contains the following fields:

    Then the following fields are collected for the respective UA record
      | emne.kode               |
      | emne.version            |
      | emne.institusjon        |
      | semester.ar             |
      | semester.termin         |
      | undervisning.navn.value |


  Scenario: Optional information about a course code is present
    Given an accessible FS-API
    And an institution username and password for that API
    And a UA id
    When a single UA entry is requested
    And the retrieved records have a field "perioder"
    And the value of the field is an array
    And the field "perioder" has at least one entry of the form {fraDato:<date>, tilDato:<date>}
    Then the following information are collected for the UA record:
      | min(fraDato values) |
      | max(tilDato value)  |


  Scenario: Optional information about a course code not present
    Given an accessible FS-api
    And an institution username and password for that API
    And a UA id
    And the retrieved records do not have a field "perioder"
    Then no information is set for this field


  Scenario: Tranformation of UA to Emne-Id
    Given a UA entry containing the following information
      | emne.institusjon |
      | emne.kode        |
      | emne.version     |
    Then the Emne Id is of the form emne.institusjon,emne.kode,emne.version


  Scenario: Information about Emne from FS #GET /emne/{id}
    Given an accessible FS-API
    And an Emne id
    Then an emne entry is retrieved


  Scenario: Retrieving Emne nanv from an Emne entry
    Given an Emne entry containing the field "navn"
    And the field "navn" contains a subset of the languages "no","nn","en"
    Then one preferred name is retrieved following the order "no","nn","en"


  Scenario:
    Given an Emne entry containing the field "organizationsEnheter"
    And the fields value is an array
    And the array contains an element
    And the element contains a field "type" with value "STUDIE"
    And the element contains a field  "href"
    Then the "href" value is retrieved from the "Emne" entry


   



